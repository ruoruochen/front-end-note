# 软件度量

**❗ KLOC（Kilometer Lines Of Code、千行代码）：**是一个程序需要多少人来完成编程工作的度量标准。

**❗ Defects per KLOC：**是作为评估代码质量的度量标准。

## 软件质量

**什么是软件质量？**

软件质量是**许多质量属性的综合体现。**

**什么是质量属性场景？**

质量属性场景是用于**描述质量属性**和**表达项目干系人观点**的工具。

**❗ 质量属性场景的组成部分**

由六部分组成：

- 刺激源：**生成刺激的实体。**
- 刺激：刺激到达系统时**需要考虑的条件。**
- 环境：刺激**在某些条件下发生。**
- 制品：**被刺激的对象**，系统/系统的一部分。
- 响应：在刺激到达后**采取的行动。**
- 响应度量：以某种方式对其进行度量，对需求进行测试。



**❗ 质量属性场景举例**

1、可修改性场景：

- 刺激源：开发人员
- 刺激：希望改变用户界面
- 环境：设计时
- 制品：代码
- 响应：修改不产生副作用
- 响应度量：在3小时内

2、安全性场景

- 刺激源：黑客
- 刺激：非法访问系统用户信息
- 环境：正常运行时
- 制品：系统用户信息
- 响应：进行安全监测，保护用户信息
- 响应度量：无法窃取用户任何信息。



**质量属性—内部质量**

只有开发人员关心

- 易理解性：开发人员理解软件产品的能力
- 可测试性：测试产品时查找缺陷的难易程度

- 可维护性：在软件中纠正一个缺陷或做一次修改的难易程度。
- 可扩展性：软件适应“变化"的能力
- 可移植性：软件不经修改/稍加修改就可以运行在不同环境的能力。
- 可复用性：软件的组成部分可以在项目的不同地方/不同项目中的重复使用的能力。



**质量属性—外部质量**

对用户而言是可见的

- 正确性：软件按照需求正确执行任务的能力。
- 健壮性：在异常情况下，软件能够正常运行的能力。
- 可靠性：在一定的环境下，在给定的时间内，系统不发生故障的概率。
- 性能：软件的“时间-空间”效率，而不仅是指软件的运行速度。
- 安全性：防止系统被非法入侵的能力
- 易用性：用户使用软件的容易程度



**质量属性—过程质量**

过程**可靠、稳健、高效、可扩展、可重用**。

过程改进指南：

**CMM（Capability Maturity Model for Software、软件能力成熟度模型）：**用来衡量软件过程能力的标准。

**CMM对质量的定义：**

1. 一个系统符合**特定需求**的程度。
2. 一个系统符合**客户或用户的要求**的程度。

## 软件度量的概念和内容

**❗ 什么是软件度量（software measurement）？**

对软件开发**项目**、**过程**及其**产品**进行定量化的过程，目的在于对其加以**理解、预测、评估、控制和改善。**



**❗ 软件度量的内容有哪些？**

**❗ 三个方面：产品、过程、资源。**

- 产品：活动中产生的成果
  - 例如：程序和文档等
- 过程：软件相关活动的集合
- 资源：过程需要的实体
  - 例如：各种资源如人员、费用等

**❗ 两个层次：内部属性、外部属性。**

- ❗ 内部属性
  - 软件产品，过程和资源本身所具有属性，如产品的复杂度、程序长度等，易于度量。
- ❗ 外部属性
  - 软件产品，过程和资源与外部环境（用户、管理人员等）间的关系，如成本、效益、可靠性、可维护性等，难以度量。



**❗ 外部属性有哪些？**

- 可理解性

- 可靠性
- 可维护性
- 可移植性
- 质量



## 软件度量的方法

 **❗ 项目管理的核心：PDCA图**

- P（Plan）：计划
- D（Do）：执行
- C（Check）：检查
- A（Action）：正式行动

<img src="https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111142039108.png" alt="image-20211114203923051" style="zoom:50%;" />



 **❗ 项目计划三个前提：**生命周期、**❗ wbs （Work Breakdown Structure）**、估计。

生命周期：**描述项目从开始到结束所经历的各个阶段**

**❗ 工作分解结构 WBS**

- 自顶向下，按照模块化思想将项目分解成易于管理的工作包。

举例：

系统需求和设计文档，根据WBS自顶向下进行项目分解，将系统拆分成N个子系统，又将N个子系统拆分成N个构件，每个构件中包括需求、设计、编码、测试、文档等工作包。

![image-20211117222207045](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111172222117.png)

**WBS的层次结构**

- 产品、活动。



估计：

三种估计方法：加权平均、`Delphi`方法、功能点。

**加权平均：**

在估计每一项任务时， 首先按最佳的、可能的、悲观的三种情况给出估计值，记作: `a、m、b`
然后用以下公式（1:4:1）计算期望值，期望值就是最终的估计值:
期望值 = `(a+4*m+b)/6`

**❗ Delphi法：**

1. 建立估计小组:专家、工作人员

2. 开会介绍内容，评判约束达成一致

3. 专家打分

4. 统计结果，计算差别:

   差别=max((最大值-平均值),(平均值-最小值))/平均值

5. 差别大于接受水平x%,要重新打分，直到差别在接受水平范围内。

**❗  功能点function point(FP)度量：**

## ❗  功能点度量—度量数据功能

**❗  度量数据功能的步骤**

1. 识别数据功能
2. 分类数据功能：ILF，EIF
3. 判断其中的DET和RET
4. 由DET和RET个数确定复杂性
5. 由复杂性确认功能规模



**识别数据功能**

- 业务数据：xx信息等
- 引用数据
- 代码数据
- 有意义的数据实体（包含非键值属性）



**数据功能分类**

**❗  ILF 内部逻辑文件**

- 在应用程序**内部维护**的、用户可识别的、逻辑相关的数据或控制信息。
- 在`数据功能点FP`中，文件和表的含义是一样的。

**❗  ELF 外部接口文件**

- 由应用程序**引用**的、用户可识别的、逻辑相关的数据或控制信息。
- 数据完全驻留在应用程序外部，由其他应用程序所维护。

**ILF和EIF的主要区别:**

- **ILF** 在被度量的应用内维护
- **EIF **由其他应用维护，但被度量应用会引用其数据。



**判断其中的RET和DET**

**DET：数据元素类型（简单说就是类的属性）**

- 数据功能中唯一的、用户可识别的、非重复的属性。
- 例如：部门信息中包含部门编号、部门名称、部门成立时间、工作范围这4个属性项，也就是DET=4。

**RET：记录元素类型（类的个数）**

- 一个数据功能中用户可识别的数据分组数量。
- 例如：员工信息中包含员工基本信息、学历信息、社会关系信息这3组数据，也就是RET=3。



**由DET和RET个数确定复杂性**

![image-20211115215018248](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152150300.png)



**由复杂性确认功能规模**

![image-20211115215108272](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152151327.png)



**实例1：**

![image-20211115221145449](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152211519.png)

被度量应用为：L系统

识别数据功能：用户信息、员工信息。

分类数据功能：用户信息ILF、员工信息ELF

判断其中的DET：用户信息、员工信息

> 如何理解DET7和4：
>
> 用户信息7：在用户的视角能识别这7项属性。
>
> 员工信息4：取相同：员工编号、姓名、性别、所属部门，因为在用户视角只能识别这4项属性，入职时间等等用户是不知道的。

判断其中的RET：用户信息1、员工信息1

> RET即数据项的分组数量。

数据功能复杂度：

- 用户信息 ILF、DET7、RET1 低
- 员工信息 ELF、DET4、RET1 低

数据功能规模：

- 用户信息：7
- 员工信息：5
- 总规模：12（FP）

## ❗  功能点度量—度量事务功能

**❗  度量事务功能的步骤**

1. 识别基本过程
3. 事务功能分类：EI，EO，EQ
4. 判断其中的DET，FTR
5. 由DET和FTR个数确定复杂性
6. 由复杂性确定事务功能规模



**识别基本过程**

- 构成完整事务
- 对用户有意义



**事务功能分类**

**EI 外部输入**

- 数据由外向内跨越边界的基本处理过程。

**EO 外部输出**

- 导出的数据由内向外跨越边界的基本处理过程。**含处理逻辑：数学公式计算、衍生数据、维护ILF、改变应用行为等**

**EQ 外部查询**

- 发送数据到外部。**不含数学公式或计算、不创建衍生数据，不维护ILF，不改变应用行为**



**判断其中的DET，FTR**

**❗ FTR：文件类型引用**

- 被事务功能读取或维护的数据功能。

**数据功能：**

- ILF：被事务功能读取或维护
- ELF：被事务功能读取。

**EQ外部查询的FTR：**

- 其读取的ILF或ELF

**EI外部输入和EO外部输出的FTR**

- 其读取的ILF或ELF
- 其维护的ILF（因ILF既被维护又被读取，所以只能算一个）



**实例1：**

![image-20211116220813142](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111162208200.png)

添加员工信息，读取和维护ILF用户信息，读取EIF员工信息，故FTR:2

**实例2：**

![image-20211116220145491](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111162201615.png)

## 功能点度量—计算UAFP数量

未调整的功能点数UAFP = 外部输入EI+外部输出EO+外部查询EQ+内部逻辑文件ILF+外部接口文件ELF

**实例1：**

![image-20211115222506493](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152225562.png)

![image-20211115222218854](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152222931.png)

![image-20211115222234885](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111152222951.png)

## ❗ 度量概念模型

**❗  元模型**

元模型的定义：描述某一模型的规范，具体来说就是描述模型中的元素，及元素与元素之间的关系。

**❗  元模型举例**

![image-20211118151149858](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181511089.png)

以类模型举例，一个类模型中它包含了 3 种元素：Class、Interface、Package，元素之间的关系包括继承、聚合、引用、实现、包含等关系，我们将这些信息抽象出来，形成了元模型。

通俗的来说，元模型是一个抽象语言，我们利用这个语言去描述模型。

![image-20211118151319531](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181513598.png)

**❗  元模型结构**

元模型结构有 4 层：信息层、模型

层、元模型层和元元模型层。

1、信息层

由描述的数据组成，如用户数据。

2、模型层

- 由元数据组成，为描述信息层而定义的“抽象语言”。

- 信息层的数据是模型层的一个实例

3、元模型层

- 由元一元数据组成，为描述模型层而定义的“抽象语言”

- 一个模型是元模型的一个实例。

4、元元模型层

- 由元元数据的**结构和语义的描述**组成，为了描述元模型而定义的一种“抽象语言”。
- 一个元模型是元元模型的一个实例

## 度量信息模型

### ❗ 使度量发挥作用的两个关键因素：

- **信息驱动的度量方法：**理清三方面的关系：需要什么信息、实际测量的是什么、如何将测量数据定义成可用结果。
- **结构化的和可重复的度量过程：**定义了项目的**度量活动和相关的信息接口**。

### ❗ 度量信息模型关系

**决策者的信息需要**

决策者需要综合成本等因素上做出权衡的决策，而这些决策**需要大量信息**的支持。

度量信息模型在度量计划活动选择最合适的软件测量，满足决策者的信息需要。

**项目度量产生信息产品**

随着测量的进行，度量信息模型将度量数据分析成信息产品，这些信息产品结合了已制定的决策、度量结果，给决策者提供建议，形成一个反馈。

<img src="https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181526906.png" alt="image-20211118152631856" style="zoom:50%;" />

### ❗ 信息分类

信息分类共分为七大类：

- 进度和进展
- 资源和费用
- 产品规模和稳定性
- 产品质量
- 过程性能
- 技术有效性
- 客户满意度

## ❗ 度量构造

### ❗ 信息需要转化为度量计划的过程

![image-20211118153801908](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181538975.png)

1、**信息需要：**标识决策者需要的**信息需要**。

2、**可测量概念：**将产品与信息关联起来形成**可测量概念**。

3、**度量构造：**实现可测量概念的方法。

4、**度量规程：**定义了实例化度量构造的数据的机制

5、**度量计划：**收集以上信息形成可执行的方案计划。

### ❗ 度量构造

度量构造的定义：实现可测量概念的方法，指定了要测量什么，以及如何将数据整合成满足信息需要的结果。

度量构造描述了软件属性是如何量化并转换成提供给决策的指示器的。

度量构造可能包括三种测量类型：基本测量、派生测量、指示器。

![image-20211118154823561](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181548655.png)



### ❗ 指示器

**指示器：**一个或多个测量的显示，使用预定义算法或模型组合测量而产生。

- 为用户决策导出信息。
- 使用图形/图标来表示。
- 将实际值与期望值作比较，帮助判断差距。

### ❗ 派生测量

**派生测量：**被定义成两个或多个基本测量的函数。

派生测量实例：生产率就是派生测量的一个示例，生产率通过代码行的基本测量除以工作小时的基本测量来导出。

## ❗ 度量过程模型

### ❗ 主要活动

- **计划度量：**标识信息需要和设定优先级、选择测量方法、集成到项目中
- **执行度量：**采集和处理数据、分析数据、提出建议
- **评价度量：**评价测量、评价度量过程

- **建立和维持委托：**获得组织委托、定义度量职责、提供资源。

![image-20211118160010033](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111181600095.png)

## 可用性和平均故障间隔时间MTBF的计算

可靠性的度量方式：

- **可用性：**软件可用时间占约定服务时间的百分比。
- **平均故障间隔时间（MTBF)：**总服务时间除以发生故障的次数。

![image-20211116222049794](https://ruoruochen-img-bed.oss-cn-beijing.aliyuncs.com/img/202111162220848.png)

总的时间：20天 * 10h = 200 h

故障时间：10h + (10-8)*2 = 14h

**故可用百分比=（200-14）/200 = 93%**

**MTBF= （200-14）/3 = 62小时**
