#### **js给定一个IP地址如127.0.0.1，将其转换为十进制的整数**

**所需知识：**

- `<<`表示左移，不分正负数，**补码**低位补0

- `>>`表示右移，如果该数为正，则**补码**高位补0，若为负数，则**补码**高位补1；
- `>>>`表示无符号右移，即若该数为正，则高位补0，而若该数为负数，则右移后高位同样补0。

- 8位二进制数的取值范围：[-127 , 127]

  [`>>`、`<<`、`>>>`详解](https://www.cnblogs.com/chuijingjing/p/9405598.html)

原反补码

反码：

- 正数的反码是其本身

- 负数的反码是在其原码的基础上，符号位不变，其余各个位取反。

补码：

- 正数的补码就是其本身；

- 负数的补码是在其原码的基础上，符号位不变，其余各位取反，最后+1。(也即在反码的基础上+1)

[+1] = [0000 0001]原= [0000 0001]反= [0000 0001]补

[-1] = [1000 0001]原= [1111 1110]反= [1111 1111]补

**实现思路**

将IP地址转化成整数的方法如下：

1、通过split方法按，分隔得到4个长度的数组

2、通过左移位操作（<<）给每一段的数字加权，第一段的权为2的24次方，第二段的权为2的16次方，第三段的权为2的8次方，最后一段的权为1。

```js
function ipToNumber(ip) {
  var num = 0;
  //如果空，返回0
  if (ip == "") {
    return num;
  }
  var arr = ip.split(".");
  //不足4次，返回0
  if (arr.length != 4) {
    return num;
  }
  //
  num += parseInt(arr[0]) << 24;
  num += parseInt(arr[1]) << 16;
  num += parseInt(arr[2]) << 8;
  num += parseInt(arr[3]) << 0;
  return num;
}
console.log(ipToNumber("127.0.0.0"));

```

#### 将十进制整数形式转换成127.0.0.1形式的ip地址

将整数形式的IP地址转化成字符串的方法如下：

1、将整数值进行无符号右移操作（>>>），右移24位，右移时高位补0，得到的数字即为第一段IP。

2、通过左移8位，右移24位，将整数值的高8位设为0，得到的数字即为第二段IP。

3、通过左移16位，右移24位，将整数值的高16位设为0，得到的数字即为第三段IP。

4、通过左移24位，右移24位，将整数值的高24位设为0，得到的数字即为第四段IP。

```js
function numberToIp(number) {
  var ip = "";
  if (number <= 0) {
    return ip;
  }
  var ip3 = (number << 0) >>> 24;
  var ip2 = (number << 8) >>> 24;
  var ip1 = (number << 16) >>> 24;
  var ip0 = (number << 24) >>> 24

  ip += ip3 + "." + ip2 + "." + ip1 + "." + ip0;

  return ip;
}
```



